{"version":3,"sources":["../../../src/directives/download-button.directive.ts"],"names":[],"mappings":";;;;;;;;;AAAA,OAAO,EAAE,SAAA,EAAW,UAAA,EAAY,KAAA,EAAyC,QAAA,EAAS,MAAO,eAAA,CAAgB;AAGzG;;;;;;GAMG;AAIH;IAOE,iCAAoB,QAAkB,EAAU,EAAc;QAA1C,aAAQ,GAAR,QAAQ,CAAU;QAAU,OAAE,GAAF,EAAE,CAAY;QAFtD,UAAK,GAAW,EAAE,CAAC;IAEsC,CAAC;IAElE,0CAAQ,GAAR;QACE,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAED,6CAAW,GAAX,UAAY,OAAsB;QAChC,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAEO,4CAAU,GAAlB;QACE,IAAI,KAAK,GAAW,CAAC,CAAC;QACtB,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAC;YACtD,KAAK,GAAG,IAAI,CAAC,wBAAwB,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;QACvD,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,KAAK,GAAG,CAAC,CAAC;QACZ,CAAC;QACD,iDAAiD;QACjD,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,OAAO,EAAK,KAAK,OAAI,CAAC,CAAC;QAG5E,yDAAyD;QACzD,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,QAAQ,EAAE,CAAC,IAAI,CAAC,aAAa,IAAI,CAAC,IAAI,CAAC,aAAa,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAC;IACjJ,CAAC;IAEO,0DAAwB,GAAhC;QACE,IAAI,GAAG,GAAW,CAAC,CAAC;QACpB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;YACxB,MAAM,CAAC,GAAG,CAAC;QACb,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YAChD,GAAG,EAAE,CAAC;QACR,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,KAAK,SAAS,IAAI,IAAI,CAAC,aAAa,CAAC,KAAK,KAAK,IAAI,CAAC,CAAC,CAAC;YAChF,GAAG,EAAE,CAAC;QACR,CAAC;QAED,MAAM,CAAC,GAAG,CAAC;IACb,CAAC;IA7CQ;QAAR,KAAK,EAAE;;kEAA8B;IAC7B;QAAR,KAAK,EAAE;;8DAA0B;IAHvB,uBAAuB;QAHnC,SAAS,CAAC;YACT,QAAQ,EAAE,mBAAmB;SAC9B,CAAC;yCAQ8B,QAAQ,EAAc,UAAU;OAPnD,uBAAuB,CAgDnC;IAAD,8BAAC;CAhDD,AAgDC,IAAA;SAhDY,uBAAuB","file":"download-button.directive.js","sourceRoot":"","sourcesContent":["import { Directive, ElementRef, Input, OnChanges, SimpleChanges, OnInit, Renderer } from '@angular/core';\r\nimport { ButtonsConfig } from '../components/modal-gallery.component';\r\n\r\n/**\r\n * Directive to display the download button.\r\n * To show this button, you must provide a ButtonsConfig object with 'download: true' as property.\r\n * All other configurations will hide this button.\r\n * Pay attention, because this directive is quite smart to choose button's order using the\r\n * correct right margin in pixels. To do that, it uses also imgExtUrl and configButtons.\r\n */\r\n@Directive({\r\n  selector: '[download-button]'\r\n})\r\nexport class DownloadButtonDirective implements OnInit, OnChanges {\r\n\r\n  @Input() configButtons: ButtonsConfig;\r\n  @Input() imgExtUrl: string | void;\r\n\r\n  private RIGHT: number = 63;\r\n\r\n  constructor(private renderer: Renderer, private el: ElementRef) {}\r\n\r\n  ngOnInit() {\r\n    this.applyStyle();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    this.applyStyle();\r\n  }\r\n\r\n  private applyStyle() {\r\n    let right: number = 0;\r\n    if (this.configButtons && this.configButtons.download) {\r\n      right = this.getNumOfPrecedingButtons() * this.RIGHT;\r\n    } else {\r\n      right = 0;\r\n    }\r\n    // apply [style.right]=\"\" to download url <a></a>\r\n    this.renderer.setElementStyle(this.el.nativeElement, 'right', `${right}px`);\r\n\r\n\r\n    // hide downloadButton if configButtons.download is false\r\n    this.renderer.setElementProperty(this.el.nativeElement, 'hidden', !this.configButtons || (this.configButtons && !this.configButtons.download));\r\n  }\r\n\r\n  private getNumOfPrecedingButtons() {\r\n    let num: number = 0;\r\n    if (!this.configButtons) {\r\n      return num;\r\n    }\r\n\r\n    if (this.configButtons.extUrl && this.imgExtUrl) {\r\n      num++;\r\n    }\r\n\r\n    if (this.configButtons.close === undefined || this.configButtons.close === true) {\r\n      num++;\r\n    }\r\n\r\n    return num;\r\n  }\r\n}\r\n"]}